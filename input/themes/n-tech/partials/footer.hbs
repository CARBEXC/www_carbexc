<footer class="footer">
   <div class="wrapper">

      <a class="logo footer__logo" href="{{@website.url}}">
         {{#if @website.logo}}
            <img src="{{@website.logo}}" alt="{{@website.name}}">
         {{else}}
            {{@website.name}}
         {{/if}}
      </a>
       
      {{#if menus.footerMenu}}
         <ul class="footer__nav">
            {{> simple-menu menus.footerMenu}}
         </ul>
      {{/if}}

      {{#if @config.custom.copyrightText}}
         <div class="footer__copy">
            {{{@config.custom.copyrightText}}}
         </div>
      {{/if}}      

      {{#if @config.custom.socialButtons}}
         <div class="footer__social">
            {{> social-buttons}}
         </div>
      {{/if}}
    
   </div>
</footer>

{{#if @config.custom.newsletter}}
       {{> newsletter}}
{{/if}}

<script>
   window.publiiThemeMenuConfig = {    
        mobileMenuMode: '{{@config.custom.mobilemenu}}',
        animationSpeed: 300,
        submenuWidth: {{#checkIf @config.custom.submenu '==' "auto" }}'auto'{{else}}{{@config.custom.submenuWidth}}{{/checkIf}},
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: {{@config.custom.mobilemenuExpandableSubmenus}}, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };
</script>

<script defer src="{{js "scripts.min.js"}}"></script>
{{#if @config.site.mediaLazyLoad}}
   <script>        
      var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }
   </script>
{{/if}}

{{#if @config.custom.pagePrefetching}}
   <script defer src="{{js "quicklink.umd.js"}}"></script>
   <script>
      window.addEventListener('load', () =>{
      quicklink.listen();
      });
   </script>
{{/if}}

{{#is "post"}}
   {{#post}}
      {{#if hasGallery}}
          {{> photoswipe}}
      {{/if}}
  {{/post}}
{{/is}}

{{#checkIf @config.custom.frontSource '==' "post"}}
   {{#checkIf @config.custom.frontGallery '==' true}}
      {{#is "index"}}
          {{> photoswipe}}
      {{/is}}
   {{/checkIf}}
{{/checkIf}}

{{#if @config.custom.commentDisqusShortname}}
   <script id="dsq-count-scr" src="https://{{@config.custom.commentDisqusShortname}}.disqus.com/count.js" async></script>  
{{/if}}

{{#if @renderer.previewMode}}
   <script defer src="{{js "svg-map.js"}}"></script>
   <script defer src="{{js "svg-fix.js"}}"></script>
{{/if}}

{{{@footerCustomCode}}}
{{{ publiiFooter }}}
</body>
</html>
